# SearchService API Tests

@baseUrl = http://localhost:5298
@userId = 123e4567-e89b-12d3-a456-426614174000
@userRole = Admin
@departmentId = 123e4567-e89b-12d3-a456-426614174001

### 1. Search Documents - Basic Search
POST {{baseUrl}}/api/v1/search
Content-Type: application/json
X-User-Id: {{userId}}
X-User-Role: {{userRole}}
X-Department-Id: {{departmentId}}

{
  "query": "report",
  "page": 1,
  "pageSize": 10,
  "sortBy": "relevance",
  "ascending": false
}

### 2. Search Documents - With Filters
POST {{baseUrl}}/api/v1/search
Content-Type: application/json
X-User-Id: {{userId}}
X-User-Role: {{userRole}}
X-Department-Id: {{departmentId}}

{
  "query": "annual",
  "filters": {
    "categories": ["Finance", "HR"],
    "departmentIds": ["D1111111-1111-1111-1111-111111111111"],
    "fromDate": "2025-11-01T00:00:00Z",
    "toDate": "2026-02-28T23:59:59Z"
  },
  "page": 1,
  "pageSize": 10,
  "sortBy": "relevance",
  "ascending": false
}

### 3. Search Documents - Sort by Title
POST {{baseUrl}}/api/v1/search
Content-Type: application/json
X-User-Id: {{userId}}
X-User-Role: {{userRole}}
X-Department-Id: {{departmentId}}

{
  "query": "contract",
  "page": 1,
  "pageSize": 10,
  "sortBy": "title",
  "ascending": true
}

### 4. Get Search Suggestions
GET {{baseUrl}}/api/v1/search/suggestions?prefix=ann&limit=10
X-User-Id: {{userId}}
X-User-Role: {{userRole}}
X-Department-Id: {{departmentId}}

### 5. Get Search Facets
GET {{baseUrl}}/api/v1/search/facets
X-User-Id: {{userId}}
X-User-Role: {{userRole}}
X-Department-Id: {{departmentId}}

### 6. Search - Invalid Query (Too Short)
POST {{baseUrl}}/api/v1/search
Content-Type: application/json
X-User-Id: {{userId}}
X-User-Role: {{userRole}}
X-Department-Id: {{departmentId}}

{
  "query": "a",
  "page": 1,
  "pageSize": 10
}

### 7. Search - Invalid Page Size
POST {{baseUrl}}/api/v1/search
Content-Type: application/json
X-User-Id: {{userId}}
X-User-Role: {{userRole}}
X-Department-Id: {{departmentId}}

{
  "query": "document",
  "page": 1,
  "pageSize": 200
}

### 8. Suggestions - Prefix Too Short
GET {{baseUrl}}/api/v1/search/suggestions?prefix=a&limit=10
X-User-Id: {{userId}}
X-User-Role: {{userRole}}
X-Department-Id: {{departmentId}}

